---
import { getCollection } from "astro:content";

import About from "@/components/organisms/About/index.astro";
import Hero from "@/components/molecules/Hero.astro";
import RecentPosts from "@/components/organisms/RecentPosts.astro";
import RecentProjects from "@/components/organisms/RecentProjects.astro";
import Base from "@/components/templates/Base.astro";
import { AppConfig } from "@/utils/app-config";
import { sortByDate } from "@/utils/post";

const posts = await getCollection("blog");
const sortedPosts = sortByDate(posts);
const lastThreePosts = sortedPosts.slice(0, 3);

const { title } = AppConfig;
const { description } = AppConfig;
---

<Base head={{ title, description }}>
  <Hero />
  <About />
  <RecentPosts posts={lastThreePosts} />
  <RecentProjects />
</Base>
